{% extends "base.html" %}
{% block title %}All Products - ShopNow{% endblock %}

{% block content %}
<h2>All Products</h2>

<!-- Search & Filters -->
<form method="GET" class="filters">
  <input type="text" name="search" placeholder="Search products..." value="{{ request.args.search }}">
  <select name="category">
    <option value="">All Categories</option>
    {% for cat in categories %}
      <option value="{{ cat }}" {% if request.args.category == cat %}selected{% endif %}>{{ cat }}</option>
    {% endfor %}
  </select>
  <select name="brand">
    <option value="">All Brands</option>
    {% for brand in brands %}
      <option value="{{ brand }}" {% if request.args.brand == brand %}selected{% endif %}>{{ brand }}</option>
    {% endfor %}
  </select>
  <button type="submit">Filter</button>
</form>

<div class="products-grid">
  {% if products %}
    {% for product in products %}
      <div class="product-card">
        <h3>{{ product.ProductName }}</h3>
        <p>{{ product.Description }}</p>
        <p>$ {{ "%.2f"|format(product.Price) }}</p>
        <a href="/cart/add/{{ product.ProductID }}" class="btn-add-to-cart">Add to Cart</a>
      </div>
    {% endfor %}
  {% else %}
    <p>No products found.</p>
  {% endif %}
</div>
{% endblock %}